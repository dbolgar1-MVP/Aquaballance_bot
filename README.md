# AquaBalance Bot

Telegram-бот для ведения параметров аквариумов, учета рыб и растений, а также анализа качества воды.

## Возможности
- Добавление нескольких аквариумов с именем и описанием.
- Хранение химических параметров воды (pH, KH, GH, NO₂, NO₃, NH₃/NH₄, PO₄).
- Расчет концентрации NH₃/NH₄.
- Просмотр списка аквариумов пользователя.
- Работа в режиме Long Polling (без вебхуков).

## Стек технологий
- Python 3.13
- aiogram — Telegram Bot API
- psycopg2 — подключение к PostgreSQL
- Render — хостинг бота
- PostgreSQL — база данных

## Переменные окружения
Перед запуском создайте `.env` файл (локально) или задайте переменные в Render:

# Aquaballance_bot — MVP (Long Polling)

Этот репозиторий содержит MVP Telegram-бота для мониторинга параметров воды и анализа совместимости обитателей.

## Файлы
- `main.py` — главный бот (Long Polling)
- `schema.sql` — SQL-схема для БД (Postgres)
- `requirements.txt` — Python зависимости
- `Aquaballance_bot.env` — шаблон .env (заполните реальными значениями)
- `utils/` — утилиты (DB helpers, plot, compatibility)

## Быстрый старт (Render)
1. Разместите этот репозиторий на GitHub.
2. На Render создайте **New → Background Worker** (или Web Service, но в случае Long Polling лучше Worker).
3. В настройках сервиса укажите `Start Command`: `python main.py`
4. Render будет клонировать репозиторий и запускать `main.py`. Бот читает `.env` в корне репозитория (если файл называется `Aquaballance_bot.env` — переименуйте его в `.env` или измените `load_dotenv()` в `main.py`).
5. Перед запуском заполните реальные значения в `Aquaballance_bot.env` (или `.env`) — BOT_TOKEN, DATABASE_URL.

## Инициализация БД
- Подключитесь к вашей Postgres-базе и выполните `schema.sql` для создания таблиц.
- Либо при запуске `main.py` вызов `init_db` выполнит создание таблиц (если ваша конфигурация это поддерживает).

## Что работает в MVP
- Добавление аквариумов (имя, объём, описание)
- Ввод тестов воды (последовательный ввод полей)
- Расчёт NH3 и сохранение теста в БД
- Построение графика pH (последние измерения)
- Базовая проверка совместимости обитателя по последнему тесту воды

